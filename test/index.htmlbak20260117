<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GasGx - Natural Gas Power Mining</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome 6.5.1 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- html2canvas for Screenshot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Chart.js for Dashboard Charts (From index.html) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gas: {
                            bg: '#0F0F0F',      
                            card: '#202020',    
                            green: '#5DD62C',   
                            darkGreen: '#337418',
                            text: '#F8F8F8',    
                            subtext: '#94a3b8'  
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    boxShadow: {
                        'glow': '0 0 10px rgba(93, 214, 44, 0.3)',
                        'glow-strong': '0 0 20px rgba(93, 214, 44, 0.6)',
                    },
                    animation: {
                        'pulse-glow': 'pulseGlow 2s infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 10px rgba(93, 214, 44, 0.4)' },
                            '50%': { boxShadow: '0 0 20px rgba(93, 214, 44, 0.8)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        :root { color-scheme: dark; }
        body {
            background-color: #0F0F0F;
            color: #F8F8F8;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* 滚动条 */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0F0F0F; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #5DD62C; }

        /* 卡片磨砂效果 */
        .gas-card {
            background-color: rgba(32, 32, 32, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* --- DASHBOARD SPECIFIC STYLES (Merged from index.html) --- */
        .data-card {
            background: linear-gradient(145deg, rgba(32,32,32,0.9) 0%, rgba(20,20,20,0.95) 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }
        .data-card:hover {
            border-color: rgba(93, 214, 44, 0.3);
            transform: translateY(-2px);
        }
        .neon-text {
            text-shadow: 0 0 5px rgba(93, 214, 44, 0.5), 0 0 10px rgba(93, 214, 44, 0.3);
        }
        .blinking-dot {
            height: 8px;
            width: 8px;
            background-color: #5DD62C;
            border-radius: 50%;
            display: inline-block;
            animation: blink 2s infinite;
        }
        @keyframes blink {
            0% { opacity: 1; transform: scale(1); box-shadow: 0 0 0 0 rgba(93,214,44,0.7); }
            50% { opacity: 0.5; transform: scale(0.9); box-shadow: 0 0 0 0 rgba(93,214,44,0); }
            100% { opacity: 1; transform: scale(1); box-shadow: 0 0 0 0 rgba(93,214,44,0); }
        }
        /* --------------------------------------------------------- */

        /* Mega Menu 动画 */
        .mega-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: #151515;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem 0;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            z-index: 40;
        }

        .group:hover .mega-menu {
            display: block;
            animation: slideDown 0.2s ease-out;
        }

        /* Dropdown Menu 动画 */
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            min-width: 220px;
            background-color: #151515;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0 0 8px 8px;
            padding: 0.5rem 0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            z-index: 40;
        }

        .group:hover .dropdown-menu {
            display: block;
            animation: slideDown 0.2s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-item-link {
            position: relative;
            padding: 1.5rem 0.5rem;
            color: #94a3b8;
            transition: color 0.3s;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .nav-item-link:hover { color: #5DD62C; }
        
        .nav-item-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #5DD62C;
            transition: width 0.3s;
        }
        .nav-item-link:hover::after { width: 100%; }

        /* Footer Link Hover */
        .footer-link {
            color: #94a3b8;
            transition: all 0.2s;
            font-size: 0.8rem;
            white-space: nowrap;
        }
        .footer-link:hover {
            color: #5DD62C;
        }

        /* Mobile Menu Styles */
        #mobile-menu-container {
            transition: transform 0.3s ease-in-out;
        }
        .mobile-submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        /* Footer Accordion (Mobile) */
        .footer-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        /* Floating Share Button Animation */
        @keyframes floatPulse {
            0% { box-shadow: 0 0 0 0 rgba(93, 214, 44, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(93, 214, 44, 0); }
            100% { box-shadow: 0 0 0 0 rgba(93, 214, 44, 0); }
        }
        .float-btn {
            animation: floatPulse 2s infinite;
        }

        /* Login Modal Animation */
        @keyframes modalPop {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .modal-animate {
            animation: modalPop 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen relative">

    <!-- Header (FROM TEMPLATE) -->
    <header class="fixed top-0 w-full z-50 gas-card h-16 transition-all duration-300">
        <div class="max-w-[1800px] mx-auto px-4 h-full flex justify-between items-center relative">
            
            <!-- Left: Logo + Tagline -->
            <div class="flex items-center gap-3 w-auto shrink-0 mr-4">
                <a href="/index.html" target="_blank" class="flex items-center gap-2 group">
                    <h1 class="text-2xl font-bold tracking-wider text-gas-green hover:text-white transition-colors cursor-pointer">GasGx</h1>
                </a>
                
                <!-- Tagline: Header (Mobile & Desktop) - Fixed to show on mobile -->
                <div class="flex flex-col justify-center border-l border-gray-700 pl-2 md:pl-3 h-6 md:h-8">
                    <span id="header-tagline" class="text-gas-green text-[10px] md:text-xs font-bold tracking-wide leading-tight">Natural Gas Power Mining Assistant</span>
                </div>
            </div>

            <!-- Center: Desktop Navigation -->
            <nav id="desktop-nav" class="hidden lg:flex items-center justify-center gap-2 xl:gap-6 h-full flex-1">
                <!-- JS Generated -->
            </nav>

            <!-- Right: Language & Mobile Toggle -->
            <div class="flex items-center gap-4 w-auto shrink-0 justify-end ml-4">
                
                <!-- Auth / User Profile Area -->
                <div class="hidden md:flex relative items-center">
                    <!-- Login Button -->
                    <button id="auth-login-btn" onclick="window.AuthApp.signIn()" class="hidden flex items-center gap-2 text-xs font-bold text-black bg-gas-green hover:bg-white transition-all rounded-full px-4 py-1.5 shadow-glow hover:shadow-glow-strong transform hover:scale-105 active:scale-95">
                        <i class="fa-brands fa-google"></i>
                        <span data-i18n="auth_login">Login</span>
                    </button>

                    <!-- User Profile -->
                    <div id="auth-user-profile" class="hidden items-center gap-2 cursor-pointer group relative h-full">
                        <div class="relative py-3">
                            <img id="auth-user-avatar" src="" alt="User" class="w-9 h-9 rounded-full border-2 border-gas-green p-0.5 transition-transform group-hover:scale-105">
                            <div class="absolute bottom-3 right-0 w-2.5 h-2.5 bg-gas-green rounded-full border-2 border-[#151515]"></div>
                        </div>
                        
                        <!-- Dropdown -->
                        <div class="absolute right-0 top-full pt-1 w-48 hidden group-hover:block z-[60]">
                            <div class="bg-[#151515] border border-white/10 rounded-xl shadow-2xl py-2 mt-1">
                                <div class="px-4 py-2 border-b border-white/5 mb-1">
                                    <span class="text-[10px] text-gray-500 uppercase tracking-wider font-bold">Account</span>
                                    <div id="dropdown-username" class="text-xs text-white font-bold truncate mt-1">User</div>
                                </div>
                                <button onclick="window.AuthApp.signOut()" class="w-full text-left px-4 py-2 text-xs text-gray-300 hover:text-gas-green hover:bg-white/5 transition-colors flex items-center">
                                    <i class="fa-solid fa-right-from-bracket mr-2"></i> <span data-i18n="auth_logout">Logout</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Language Switcher (Desktop) -->
                <div class="hidden sm:flex items-center gap-1 bg-[#111] border border-white/10 rounded-full px-1 py-1">
                    <button onclick="window.app.setLanguage('zh')" id="btn-lang-zh" class="px-2 py-1 rounded-full text-[10px] font-medium transition-all w-8 text-center text-gas-subtext">CN</button>
                    <button onclick="window.app.setLanguage('en')" id="btn-lang-en" class="px-2 py-1 rounded-full text-[10px] font-bold transition-all w-8 text-center text-black bg-gas-green shadow-glow">EN</button>
                    <button onclick="window.app.setLanguage('ru')" id="btn-lang-ru" class="px-2 py-1 rounded-full text-[10px] font-medium transition-all w-8 text-center text-gas-subtext">RU</button>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" onclick="window.app.toggleMobileMenu()" class="lg:hidden p-2 text-white hover:text-gas-green text-xl focus:outline-none z-50 relative">
                    <i class="fa-solid fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation Overlay (FROM TEMPLATE) -->
    <div id="mobile-menu-container" class="fixed inset-0 z-40 bg-[#111] transform translate-x-full pt-20 px-4 pb-8 overflow-y-auto lg:hidden">
        <!-- Mobile Lang Switcher -->
        <div class="flex justify-center gap-4 mb-6 border-b border-white/10 pb-4">
            <div class="flex items-center gap-2 bg-[#222] border border-white/10 rounded-full px-1 py-1">
                <button onclick="window.app.setLanguage('zh')" id="mob-btn-lang-zh" class="px-4 py-2 rounded-full text-xs font-bold transition-all text-gray-400">CN</button>
                <button onclick="window.app.setLanguage('en')" id="mob-btn-lang-en" class="px-4 py-2 rounded-full text-xs font-medium transition-all text-black bg-gas-green">EN</button>
                <button onclick="window.app.setLanguage('ru')" id="mob-btn-lang-ru" class="px-4 py-2 rounded-full text-xs font-medium transition-all text-gray-400">RU</button>
            </div>
        </div>

        <!-- Mobile Auth -->
        <div class="mb-6 border-b border-white/10 pb-4 flex justify-center">
             <button id="mob-auth-login-btn" onclick="window.AuthApp.signIn()" class="hidden w-full max-w-xs py-3 rounded-lg bg-gas-green text-black font-bold flex items-center justify-center gap-2 shadow-glow">
                <i class="fa-brands fa-google"></i>
                <span data-i18n="auth_login">Login with Google</span>
            </button>
             <div id="mob-auth-user-profile" class="hidden flex items-center justify-between w-full max-w-xs px-2">
                <div class="flex items-center gap-3">
                     <img id="mob-auth-user-avatar" src="" class="w-10 h-10 rounded-full border border-gas-green">
                     <div class="flex flex-col">
                         <span class="text-xs text-gray-400">Welcome,</span>
                         <span id="mob-auth-username" class="text-sm text-white font-bold">User</span>
                     </div>
                </div>
                <button onclick="window.AuthApp.signOut()" class="text-xs text-red-400 hover:text-red-300 border border-red-900/50 bg-red-900/20 px-3 py-1.5 rounded">
                    <span data-i18n="auth_logout">Logout</span>
                </button>
             </div>
        </div>
        
        <nav id="mobile-nav-content" class="flex flex-col space-y-1">
            <!-- JS Generated Mobile Nav -->
        </nav>
    </div>

    <!-- Main Content Area: Bitcoin Dashboard (Migrated from index.html) -->
    <main class="flex-grow pt-24 pb-12 px-4 w-full max-w-[1600px] mx-auto space-y-8">
        
        <!-- Hero Section -->
        <section class="text-center py-10 md:py-16">
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
                <span data-i18n="Powering">Powering</span> 
                <span class="text-gas-green neon-text">Bitcoin</span> 
                <span data-i18n="with Natural Gas">with Natural Gas</span>
            </h2>
            <p class="text-gray-400 max-w-2xl mx-auto text-lg" data-i18n="heroSubtext">
                Utilizing stranded gas and flared gas for efficient, profitable Bitcoin mining operations.
            </p>
        </section>

        <!-- Cambridge Bitcoin Electricity Consumption Index (CBECI) Section -->
        <section class="mt-4 mb-8">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h3 class="text-2xl font-bold text-white flex items-center gap-3">
                        <i class="fa-solid fa-bolt text-gas-green"></i>
                        <span data-i18n="cbeciTitle">Bitcoin Electricity Consumption</span>
                    </h3>
                    <p class="text-sm text-gray-400 mt-1" data-i18n="cbeciSubtitle">Data insights based on Cambridge Bitcoin Electricity Consumption Index (CBECI)</p>
                </div>
                <a href="https://ccaf.io/cbnsi/cbeci" target="_blank" class="hidden sm:flex items-center gap-2 text-gas-green hover:text-white transition-colors text-sm border border-gas-green/30 hover:border-gas-green px-4 py-2 rounded-full">
                    <span>Source: CCAF</span>
                    <i class="fa-solid fa-external-link-alt"></i>
                </a>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Stat: Annualized Consumption -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- TWh Card -->
                    <div class="data-card rounded-2xl p-8 text-center border-t-4 border-t-gas-green">
                        <h4 class="text-gray-400 text-sm font-bold uppercase tracking-widest mb-4" data-i18n="estimatedConsTitle">Estimated Annualized Consumption</h4>
                        <div class="relative inline-block">
                            <span class="text-6xl md:text-7xl font-bold text-white font-mono tracking-tighter" id="cbeci-twh">172.5</span>
                            <span class="absolute -top-2 -right-12 text-gas-green text-xl font-bold">TWh</span>
                        </div>
                        <p class="text-gray-500 text-xs mt-4">
                            <span data-i18n="comparableTo">Comparable to the power consumption of</span> 
                            <span class="text-white font-bold" data-i18n="countryPoland">Poland</span>
                        </p>
                    </div>

                    <!-- Comparison List -->
                    <div class="bg-[#151515] rounded-xl p-6 border border-white/5">
                        <h4 class="text-white text-sm font-bold mb-4 flex items-center gap-2">
                            <i class="fa-solid fa-scale-balanced text-gas-subtext"></i> 
                            <span data-i18n="countryComparison">Country Comparison</span>
                        </h4>
                        <div class="space-y-4">
                            <!-- Poland -->
                            <div class="relative">
                                <div class="flex justify-between text-xs text-gray-400 mb-1">
                                    <span data-i18n="countryPoland">Poland</span>
                                    <span>~160 TWh</span>
                                </div>
                                <div class="w-full bg-gray-800 rounded-full h-2">
                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 45%"></div>
                                </div>
                            </div>
                            <!-- Bitcoin -->
                            <div class="relative">
                                <div class="flex justify-between text-xs text-white font-bold mb-1">
                                    <span class="text-gas-green" data-i18n="btcNetwork">Bitcoin Network</span>
                                    <span id="cbeci-bar-val">~172 TWh</span>
                                </div>
                                <div class="w-full bg-gray-800 rounded-full h-2">
                                    <div class="bg-gas-green h-2 rounded-full shadow-glow" style="width: 55%"></div>
                                </div>
                            </div>
                            <!-- Ukraine -->
                            <div class="relative">
                                <div class="flex justify-between text-xs text-gray-400 mb-1">
                                    <span data-i18n="countryUkraine">Ukraine</span>
                                    <span>~130 TWh</span>
                                </div>
                                <div class="w-full bg-gray-800 rounded-full h-2">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 35%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chart: Trend Visualization -->
                <div class="lg:col-span-2 data-card rounded-2xl p-6 flex flex-col">
                    <div class="flex justify-between items-center mb-6">
                        <h4 class="text-white font-bold text-sm" data-i18n="histTrendTitle">Historical Power Demand Trend</h4>
                        <div class="flex gap-2">
                            <span class="px-2 py-1 bg-white/5 rounded text-[10px] text-gray-400" data-i18n="monthlyAvg">Monthly Average</span>
                        </div>
                    </div>
                    <div class="flex-grow min-h-[300px] relative w-full">
                        <canvas id="cbeciChart"></canvas>
                    </div>
                    <p class="text-center text-[10px] text-gray-600 mt-4">* Chart data simulated for visualization based on CCAF trends.</p>
                </div>
            </div>
        </section>

        <!-- Digiconomist Environmental Impact Section -->
        <section class="mb-12">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h3 class="text-2xl font-bold text-white flex items-center gap-3">
                        <i class="fa-solid fa-leaf text-gas-green"></i>
                        <span data-i18n="digiTitle">Bitcoin Environmental Impact</span>
                    </h3>
                    <p class="text-sm text-gray-400 mt-1" data-i18n="digiSubtitle">Data insights based on Digiconomist</p>
                </div>
                <a href="https://digiconomist.net/bitcoin-energy-consumption" target="_blank" class="hidden sm:flex items-center gap-2 text-gas-green hover:text-white transition-colors text-sm border border-gas-green/30 hover:border-gas-green px-4 py-2 rounded-full">
                    <span>Source: Digiconomist</span>
                    <i class="fa-solid fa-external-link-alt"></i>
                </a>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Annualized Total Footprints -->
                <div class="data-card rounded-2xl p-6">
                    <h4 class="text-white font-bold text-sm mb-6 border-b border-white/10 pb-4 flex items-center gap-2">
                        <i class="fa-solid fa-globe"></i> <span data-i18n="annualizedFootprint">Annualized Total Footprints</span>
                    </h4>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <!-- Carbon -->
                        <div class="bg-[#151515] p-4 rounded-xl text-center group hover:bg-white/5 transition-colors">
                            <i class="fa-solid fa-cloud text-2xl text-gray-500 mb-2 group-hover:text-white transition-colors"></i>
                            <div class="text-xs text-gray-400 mb-1" data-i18n="carbonFootprint">Carbon Footprint</div>
                            <div class="text-xl font-bold text-white font-mono">85.89</div>
                            <div class="text-[10px] text-gas-green">Mt CO2</div>
                        </div>
                        <!-- Energy -->
                        <div class="bg-[#151515] p-4 rounded-xl text-center group hover:bg-white/5 transition-colors">
                            <i class="fa-solid fa-plug text-2xl text-yellow-500 mb-2 group-hover:text-yellow-400 transition-colors"></i>
                            <div class="text-xs text-gray-400 mb-1" data-i18n="electricalEnergy">Electrical Energy</div>
                            <div class="text-xl font-bold text-white font-mono">140.25</div>
                            <div class="text-[10px] text-gas-green">TWh</div>
                        </div>
                        <!-- E-Waste -->
                        <div class="bg-[#151515] p-4 rounded-xl text-center group hover:bg-white/5 transition-colors">
                            <i class="fa-solid fa-dumpster text-2xl text-red-500 mb-2 group-hover:text-red-400 transition-colors"></i>
                            <div class="text-xs text-gray-400 mb-1" data-i18n="eWaste">Electronic Waste</div>
                            <div class="text-xl font-bold text-white font-mono">55.45</div>
                            <div class="text-[10px] text-gas-green">kt</div>
                        </div>
                    </div>
                </div>

                <!-- Single Transaction Footprints -->
                <div class="data-card rounded-2xl p-6">
                    <h4 class="text-white font-bold text-sm mb-6 border-b border-white/10 pb-4 flex items-center gap-2">
                        <i class="fa-solid fa-money-bill-transfer"></i> <span data-i18n="singleTxFootprint">Single Transaction Footprints</span>
                    </h4>
                    <div class="space-y-4">
                        <!-- Carbon Tx -->
                        <div class="flex items-center justify-between bg-[#151515] p-4 rounded-xl">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-gray-400">
                                    <i class="fa-solid fa-smog"></i>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-400" data-i18n="carbonFootprint">Carbon Footprint</div>
                                    <div class="text-lg font-bold text-white font-mono">402.15 <span class="text-xs text-gray-500 font-sans">kgCO2</span></div>
                                </div>
                            </div>
                            <div class="text-right hidden sm:block">
                                <div class="text-[10px] text-gray-500 mb-1" style="max-width: 120px; line-height: 1.2;">Equivalent to watching YouTube for</div>
                                <div class="text-gas-green font-bold text-sm">26,500 hrs</div>
                            </div>
                        </div>
                        <!-- Energy Tx -->
                        <div class="flex items-center justify-between bg-[#151515] p-4 rounded-xl">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-yellow-600">
                                    <i class="fa-solid fa-bolt"></i>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-400" data-i18n="electricalEnergy">Electrical Energy</div>
                                    <div class="text-lg font-bold text-white font-mono">750.50 <span class="text-xs text-gray-500 font-sans">kWh</span></div>
                                </div>
                            </div>
                            <div class="text-right hidden sm:block">
                                <div class="text-[10px] text-gray-500 mb-1" style="max-width: 140px; line-height: 1.2;" data-i18n="compHousehold">Equivalent to power consumption of an average US household for</div>
                                <div class="text-gas-green font-bold text-sm">25.4 <span data-i18n="days">days</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bitcoin Network Status & Difficulty Module -->
        <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Price Card -->
            <div class="data-card rounded-2xl p-6 relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                    <i class="fa-brands fa-bitcoin text-6xl text-gas-green"></i>
                </div>
                <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2" data-i18n="btcPriceTitle">Bitcoin Price (USD)</h3>
                <div class="flex items-baseline gap-2">
                    <span id="btc-price" class="text-3xl font-bold text-white font-mono">Loading...</span>
                    <span id="btc-change" class="text-sm font-medium">--</span>
                </div>
                <p class="text-xs text-gray-500 mt-4" data-i18n="sourceCoingecko">Live data from CoinGecko</p>
            </div>

            <!-- Difficulty Card -->
            <div class="data-card rounded-2xl p-6 relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                    <i class="fa-solid fa-hashtag text-6xl text-gas-green"></i>
                </div>
                <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2" data-i18n="btcDifficultyTitle">Network Difficulty</h3>
                <div class="flex items-baseline gap-2">
                    <span id="btc-difficulty" class="text-3xl font-bold text-white font-mono">Loading...</span>
                </div>
                <div class="mt-4 flex items-center gap-2 text-xs text-gray-500">
                    <span class="blinking-dot"></span>
                    <span data-i18n="liveNetworkStatus">Live Network Status</span>
                </div>
            </div>

            <!-- Hashrate Card -->
            <div class="data-card rounded-2xl p-6 relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                    <i class="fa-solid fa-server text-6xl text-gas-green"></i>
                </div>
                <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2" data-i18n="btcHashrateTitle">Network Hashrate</h3>
                <div class="flex items-baseline gap-2">
                    <span id="btc-hashrate" class="text-3xl font-bold text-white font-mono">Loading...</span>
                    <span class="text-gray-500 text-sm">EH/s</span>
                </div>
                <p class="text-xs text-gray-500 mt-4" data-i18n="globalPower">Global Computational Power</p>
            </div>

            <!-- Next Adjustment Card -->
            <div class="data-card rounded-2xl p-6 relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                    <i class="fa-solid fa-clock-rotate-left text-6xl text-gas-green"></i>
                </div>
                <h3 class="text-gray-400 text-sm font-medium uppercase tracking-wider mb-2" data-i18n="btcAdjustmentTitle">Next Adjustment</h3>
                <div class="flex items-baseline gap-2">
                    <span id="btc-adjustment" class="text-2xl font-bold text-white font-mono">Loading...</span>
                </div>
                <p id="btc-adjustment-date" class="text-xs text-gas-green mt-4 font-mono">--</p>
            </div>
        </section>

        <!-- Hashrate History Chart -->
        <section class="mt-8">
            <div class="data-card rounded-2xl p-6">
                <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-6 gap-4">
                    <div>
                        <h3 class="text-xl font-bold text-white flex items-center gap-2">
                            <i class="fa-solid fa-chart-line text-gas-green"></i>
                            <span data-i18n="hashrateTrendTitle">Bitcoin Network Hashrate History</span>
                        </h3>
                        <p class="text-xs text-gray-500 mt-1">
                            <span data-i18n="hashrateSource">Data Source</span>: 
                            <a href="https://history.btc126.com/hashrate/" target="_blank" class="hover:text-gas-green transition-colors underline">BTC126</a>
                        </p>
                    </div>
                    
                    <!-- Time Range Controls -->
                    <div class="flex items-center bg-[#151515] rounded-lg p-1 border border-white/5">
                        <button onclick="window.app.updateHashrateChart('1D')" class="chart-control px-3 py-1 rounded-md text-xs font-medium text-gray-400 hover:text-white transition-all" data-range="1D">1D</button>
                        <button onclick="window.app.updateHashrateChart('1W')" class="chart-control px-3 py-1 rounded-md text-xs font-medium text-gray-400 hover:text-white transition-all" data-range="1W">1W</button>
                        <button onclick="window.app.updateHashrateChart('1M')" class="chart-control px-3 py-1 rounded-md text-xs font-medium text-gray-400 hover:text-white transition-all" data-range="1M">1M</button>
                        <button onclick="window.app.updateHashrateChart('6M')" class="chart-control px-3 py-1 rounded-md text-xs font-medium text-black bg-gas-green transition-all" data-range="6M">6M</button>
                        <button onclick="window.app.updateHashrateChart('1Y')" class="chart-control px-3 py-1 rounded-md text-xs font-medium text-gray-400 hover:text-white transition-all" data-range="1Y">1Y</button>
                    </div>
                </div>
                
                <!-- Chart Container -->
                <div class="w-full h-[350px] relative">
                    <canvas id="hashrateHistoryChart"></canvas>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer (FROM TEMPLATE) -->
    <footer class="bg-[#0a0a0a] border-t border-white/10 mt-auto pt-10 pb-8 relative z-10">
        <div class="max-w-[1800px] mx-auto px-6">
            
            <!-- Footer Top Row: Brand & Contact -->
            <div class="flex flex-col md:flex-row justify-between items-start mb-8 pb-6 border-b border-white/5">
                <!-- Left: Logo & Tagline -->
                <div class="mb-6 md:mb-0">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="text-2xl font-bold text-gas-green">GasGx</span>
                    </div>
                    <p class="text-sm text-gray-400 font-medium" data-i18n="footerTagline">Making natural gas power mining easier</p>
                </div>

                <!-- Right: Contact Info -->
                <div class="flex flex-col md:items-end space-y-2">
                    <h4 class="text-white font-bold text-sm uppercase tracking-wider mb-1" data-i18n="联系我们">Contact Us</h4>
                    <a href="mailto:contact@gasgx.com" class="text-sm text-gray-400 hover:text-gas-green flex items-center gap-2 transition-colors">
                        <i class="fa-solid fa-envelope"></i> contact@gasgx.com
                    </a>
                    <div class="text-sm text-gray-400 flex items-center gap-2">
                        <i class="fa-brands fa-weixin"></i> <span class="hover:text-gas-green cursor-pointer">www_gasgx_com</span>
                    </div>
                </div>
            </div>

            <!-- Footer Links: Row Layout (Desktop) / Accordion (Mobile) -->
            <div id="footer-links" class="mb-10 space-y-2">
                <!-- JS Generated -->
            </div>

            <!-- Bottom: Copyright & Social -->
            <div class="flex flex-col md:flex-row justify-between items-center gap-6 pt-6 border-t border-white/5">
                <div class="flex flex-col sm:flex-row items-center gap-2 text-xs text-gray-600">
                    <span>© 2026 GasGx. All rights reserved.</span>
                    
                    <!-- Privacy Policy Link with I18n -->
                    <span class="hidden sm:inline text-gray-700">|</span>
                    <a href="/about/app_privacy_policy.html" target="_blank" class="hover:text-gas-green transition-colors flex items-center gap-1">
                        <i class="fa-solid fa-shield-halved text-[10px]"></i>
                        <span data-i18n="privacy_policy">Privacy Policy</span>
                    </a>
                </div>

                <div class="flex gap-4">
                    <a href="#" target="_blank" class="text-gray-500 hover:text-gas-green transition-colors"><i class="fa-brands fa-tiktok text-lg"></i></a>
                    <a href="#" target="_blank" class="text-gray-500 hover:text-gas-green transition-colors"><i class="fa-brands fa-linkedin text-lg"></i></a>
                    <a href="#" target="_blank" class="text-gray-500 hover:text-gas-green transition-colors"><i class="fa-brands fa-facebook text-lg"></i></a>
                    <a href="#" target="_blank" class="text-gray-500 hover:text-gas-green transition-colors"><i class="fa-brands fa-weixin text-lg"></i></a>
                    <a href="#" target="_blank" class="text-gray-500 hover:text-gas-green transition-colors"><i class="fa-brands fa-x-twitter text-lg"></i></a>
                    <a href="#" target="_blank" class="text-gray-500 hover:text-gas-green transition-colors"><i class="fa-brands fa-youtube text-lg"></i></a>
                    <a href="#" target="_blank" class="text-gray-500 hover:text-gas-green transition-colors"><i class="fa-brands fa-telegram text-lg"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Floating Canvas-Style Share Button (Right Side) (FROM TEMPLATE) -->
    <button onclick="window.app.captureAndShare()" class="float-btn fixed right-6 top-1/2 -translate-y-1/2 w-12 h-12 bg-[#202020] border border-gas-green text-gas-green rounded-full shadow-lg flex items-center justify-center hover:bg-gas-green hover:text-black transition-all z-50 group" title="Share Snapshot">
        <i class="fa-solid fa-camera text-xl"></i>
        <!-- Tooltip -->
        <span class="absolute right-14 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-white/10">
            Share Page
        </span>
    </button>

    <!-- Back to Top -->
    <button onclick="window.scrollTo({top:0, behavior:'smooth'})" id="backToTopBtn" class="fixed bottom-6 right-6 bg-gas-green text-black w-10 h-10 rounded-full shadow-[0_0_15px_rgba(93,214,44,0.5)] flex items-center justify-center translate-y-20 opacity-0 transition-all duration-300 hover:scale-110 z-40 cursor-pointer">
        <i class="fa-solid fa-arrow-up"></i>
    </button>

    <!-- Share Modal (FROM TEMPLATE) -->
    <div id="shareModal" class="fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm hidden flex items-center justify-center p-4">
        <div class="bg-[#202020] border border-gas-green/30 rounded-xl p-6 max-w-sm w-full shadow-2xl transform transition-all scale-95 opacity-0" id="shareModalContent">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gas-green/10 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fa-solid fa-check text-2xl text-gas-green"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">Snapshot Generated!</h3>
                <p class="text-sm text-gray-400">Full page captured successfully.</p>
            </div>
            <button onclick="window.app.closeModal()" class="w-full py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-colors text-sm font-medium">Close</button>
        </div>
    </div>

    <!-- Login Reminder Modal (Cool Dark Style FROM TEMPLATE) -->
    <div id="loginReminderModal" class="fixed inset-0 z-[100] bg-black/90 backdrop-blur-md hidden flex items-center justify-center p-4">
        <div class="bg-[#151515] border border-gas-green/50 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(93,214,44,0.15)] relative overflow-hidden transform scale-90 opacity-0 transition-all duration-500" id="loginReminderContent">
            
            <!-- Decorative Glow -->
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-gas-green/20 rounded-full blur-[50px]"></div>
            <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-gas-green/10 rounded-full blur-[50px]"></div>

            <div class="relative z-10 text-center">
                <div class="w-20 h-20 bg-[#111] border-2 border-gas-green rounded-full flex items-center justify-center mx-auto mb-6 shadow-glow-strong animate-pulse">
                    <i class="fa-solid fa-user-astronaut text-3xl text-gas-green"></i>
                </div>
                
                <h3 class="text-2xl font-bold text-white mb-2 tracking-wide">
                    <span data-i18n="reminder_title">Unlock Full Power</span>
                </h3>
                <p class="text-gray-400 mb-8 text-sm leading-relaxed" data-i18n="reminder_desc">
                    Login to access premium tools, real-time data, and exclusive mining reports.
                </p>
                
                <div class="space-y-3">
                    <button onclick="window.AuthApp.signIn(); window.app.closeLoginReminder();" class="w-full py-3 rounded-xl bg-gas-green text-black font-bold hover:bg-white transition-all shadow-glow hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-2">
                        <i class="fa-brands fa-google"></i>
                        <span data-i18n="auth_login">Login Now</span>
                    </button>
                    <button onclick="window.app.closeLoginReminder()" class="w-full py-3 rounded-xl bg-transparent border border-white/10 text-gray-500 hover:text-white hover:border-white/30 transition-all text-xs font-medium">
                        <span data-i18n="reminder_later">Maybe Later</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase Integration Logic (Module) -->
    <script type="module">
        // Import Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBUEXdeSB7Ue0gkwcXN3j76ymyCbngxufY",
            authDomain: "gasgxmining.firebaseapp.com",
            projectId: "gasgxmining",
            storageBucket: "gasgxmining.firebasestorage.app",
            messagingSenderId: "465579060005",
            appId: "1:465579060005:web:ee20cb21ed58020c4a88cc",
            measurementId: "G-ZHNSQ29181"
        };

        // Initialize Firebase
        const fbApp = initializeApp(firebaseConfig);
        const analytics = getAnalytics(fbApp);
        const auth = getAuth(fbApp);
        const provider = new GoogleAuthProvider();

        // UI References
        const els = {
            loginBtn: document.getElementById('auth-login-btn'),
            userProfile: document.getElementById('auth-user-profile'),
            userAvatar: document.getElementById('auth-user-avatar'),
            dropdownUsername: document.getElementById('dropdown-username'),
            
            mobLoginBtn: document.getElementById('mob-auth-login-btn'),
            mobUserProfile: document.getElementById('mob-auth-user-profile'),
            mobUserAvatar: document.getElementById('mob-auth-user-avatar'),
            mobUsername: document.getElementById('mob-auth-username')
        };

        // --- Global Auth Functions (Exposed to Window for HTML onclick) ---
        window.AuthApp = {
            signIn: async () => {
                try {
                    await signInWithPopup(auth, provider);
                } catch (error) {
                    console.error("Login failed:", error);
                    alert("Login failed. Please try again.");
                }
            },
            signOut: async () => {
                try {
                    await signOut(auth);
                } catch (error) {
                    console.error("Logout failed:", error);
                }
            }
        };

        // --- Auth State Observer ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in
                if(els.loginBtn) {
                    els.loginBtn.classList.add('hidden');
                    els.loginBtn.classList.remove('flex');
                }
                if(els.userProfile) {
                    els.userProfile.classList.remove('hidden');
                    els.userProfile.classList.add('flex');
                }
                if(els.userAvatar) els.userAvatar.src = user.photoURL || 'https://via.placeholder.com/32';
                if(els.dropdownUsername) els.dropdownUsername.innerText = user.displayName || 'User';
                
                // Update Mobile UI
                if(els.mobLoginBtn) els.mobLoginBtn.classList.add('hidden');
                if(els.mobUserProfile) {
                    els.mobUserProfile.classList.remove('hidden');
                    els.mobUserProfile.classList.add('flex');
                }
                if(els.mobUserAvatar) els.mobUserAvatar.src = user.photoURL || 'https://via.placeholder.com/32';
                if(els.mobUsername) els.mobUsername.innerText = user.displayName || 'User';

                // [Robust Check] Stop reminders
                if (window.app && typeof window.app.stopLoginReminders === 'function') {
                    window.app.stopLoginReminders();
                }

            } else {
                // User is signed out
                if(els.loginBtn) {
                    els.loginBtn.classList.remove('hidden');
                    els.loginBtn.classList.add('flex');
                }
                if(els.userProfile) {
                    els.userProfile.classList.add('hidden');
                    els.userProfile.classList.remove('flex');
                }
                if(els.userAvatar) els.userAvatar.src = '';

                // Update Mobile UI
                if(els.mobLoginBtn) els.mobLoginBtn.classList.remove('hidden');
                if(els.mobUserProfile) {
                    els.mobUserProfile.classList.add('hidden');
                    els.mobUserProfile.classList.remove('flex');
                }
                if(els.mobUserAvatar) els.mobUserAvatar.src = '';
                
                // [Robust Check] Start reminders with retry mechanism
                let retries = 0;
                const attemptStart = () => {
                    if (window.app && typeof window.app.startLoginReminders === 'function') {
                        window.app.startLoginReminders();
                    } else if (retries < 5) {
                        retries++;
                        setTimeout(attemptStart, 500); // Retry every 500ms if app not ready
                    }
                };
                setTimeout(attemptStart, 500);
            }
        });
    </script>

    <!-- Application Logic (Merged: Base Logic + Dashboard Logic) -->
    <script>
        const AppData = {
            navigation: [
                { title: "首页", path: "/index.html", type: "link", icon: "fa-solid fa-house" },
                {
                    title: "解决方案",
                    path: "/solutions",
                    type: "menu",
                    children: [
                        { title: "油气井/伴生气发电", path: "/solutions/oilfield" },
                        { title: "工业园区与分布式能源", path: "/solutions/industrial" },
                        { title: "数据中心 / 挖矿电力", path: "/solutions/mining" },
                        { title: "热电联供 CHP", path: "/solutions/chp" }
                    ]
                },
                {
                    title: "机型库",
                    path: "/products",
                    type: "mega",
                    sections: [
                        {
                            header: "按功率分类",
                            items: [
                                { title: "小于 500 kW", path: "/products/power-range/0-500kw" },
                                { title: "500 – 1,000 kW", path: "/products/power-range/500-1000kw" },
                                { title: "1 MW 以上", path: "/products/power-range/1mw-plus" }
                            ]
                        },
                        {
                            header: "按冷却方式",
                            items: [
                                { title: "风冷", path: "/products/cooling/air" },
                                { title: "液冷", path: "/products/cooling/liquid" }
                            ]
                        },
                        {
                            header: "按气源类型",
                            items: [
                                { title: "天然气", path: "/products/gas/natural" },
                                { title: "伴生气", path: "/products/gas/associated" },
                                { title: "低甲烷值气", path: "/products/gas/low-methane" }
                            ]
                        },
                        {
                            header: "按部署形式",
                            items: [
                                { title: "集装箱机组", path: "/products/deployment/container" },
                                { title: "一体化机组 AIS", path: "/products/deployment/ais" },
                                { title: "滑撬式机组", path: "/products/deployment/skid" }
                            ]
                        },
                        {
                            header: "按品牌",
                            items: [
                                { title: "全部品牌", path: "/products/brands" },
                                { title: "中国生产", path: "/products/brands/china" },
                                { title: "海外生产", path: "/products/brands/overseas" }
                            ]
                        }
                    ]
                },
                {
                    title: "排行榜",
                    path: "/rankings",
                    type: "mega",
                    gridCols: "grid-cols-6",
                    sections: [
                        {
                            header: "性能榜",
                            items: [
                                { title: "综合性能 TOP 榜", path: "/rankings/performance" },
                                { title: "高效率榜", path: "/rankings/efficiency" },
                                { title: "天然气内燃机发电效率排行榜", path: "/rankings/engine-efficiency" },
                                { title: "天然气内燃机热效率排行榜", path: "/rankings/thermal-efficiency" },
                                { title: "天然气内燃机耗气量排行榜", path: "/rankings/gas-consumption" }
                            ]
                        },
                        {
                            header: "经济性榜",
                            items: [
                                { title: "最佳 ROI 榜", path: "/rankings/roi" },
                                { title: "最低发电成本 LCOE 榜", path: "/rankings/lcoe" },
                                { title: "天然气内燃机折旧排行榜", path: "/rankings/depreciation" },
                                { title: "天然气内燃机投资回报率排行榜", path: "/rankings/engine-roi" }
                            ]
                        },
                        {
                            header: "可靠性榜",
                            items: [
                                { title: "高可靠机组榜", path: "/rankings/reliability" },
                                { title: "最长 MTBF 榜", path: "/rankings/mtbf" },
                                { title: "天然气内燃机保养时间排行榜", path: "/rankings/maintenance-interval" },
                                { title: "天然气内燃机备件保障排行榜", path: "/rankings/spare-parts" }
                            ]
                        },
                        {
                            header: "品质与环保榜",
                            items: [
                                { title: "天然气内燃机排放排行榜", path: "/rankings/emissions" },
                                { title: "天然气内燃机噪音排行榜", path: "/rankings/noise" }
                            ]
                        },
                        {
                            header: "系统能力榜",
                            items: [
                                { title: "天然气内燃机发电机排行榜", path: "/rankings/generator" },
                                { title: "天然气内燃机控制系统排行榜", path: "/rankings/control-system" }
                            ]
                        },
                        {
                            header: "区域榜",
                            items: [
                                { title: "美国市场榜", path: "/rankings/usa" },
                                { title: "加拿大市场榜", path: "/rankings/canada" },
                                { title: "中东市场榜", path: "/rankings/middle-east" },
                                { title: "俄罗斯市场榜", path: "/rankings/russia" }
                            ]
                        }
                    ]
                },
                {
                    title: "应用场景",
                    path: "/use-cases",
                    type: "menu",
                    children: [
                        { title: "油气井 / 伴生气", path: "/use-cases/oilfield" },
                        { title: "工业与园区能源", path: "/use-cases/industrial" },
                        { title: "挖矿 / 数据中心", path: "/use-cases/mining" },
                        { title: "CHP 热电联供", path: "/use-cases/chp" }
                    ]
                },
                {
                    title: "工具箱",
                    path: "/tools",
                    type: "mega",
                    gridCols: "grid-cols-5",
                    sections: [
                        {
                            header: "经济测算工具",
                            items: [
                                { title: "LCOE 成本计算器", path: "/tools/lcoe-calculator" },
                                { title: "ROI 回报估算器", path: "/tools/roi" },
                                { title: "燃气发电挖矿收益计算器", path: "/tools/mining-power-calc" },
                                { title: "蒙特卡洛模拟盈利分析", path: "/tools/monte-carlo-profit" },
                                { title: "天然气发电耗气成本分析", path: "/tools/gas-cost-analysis" }
                            ]
                        },
                        {
                            header: "工程与技术工具",
                            items: [
                                { title: "气质适配工具", path: "/tools/gas-fit" },
                                { title: "排放估算工具", path: "/tools/emission" },
                                { title: "气体分析计算器", path: "/tools/gas-analyzer" },
                                { title: "能电转换计算器", path: "/tools/energy-conversion" },
                                { title: "天然气主要成分热值表", path: "/tools/gas-composition-heat" }
                            ]
                        },
                        {
                            header: "项目与选型工具",
                            items: [
                                { title: "站点匹配向导", path: "/tools/site-fit" },
                                { title: "气源所在地分析", path: "/tools/gas-location-analysis" },
                                { title: "燃气发动机选型与运营经济性", path: "/tools/engine-selection" },
                                { title: "天然气发电机机油消耗率", path: "/tools/oil-consumption" },
                                { title: "车机 VS 工业机 10MW 对比分析", path: "/tools/vehicle-vs-industrial-10mw" },
                                { title: "多机型对比 3 年运营数据", path: "/tools/3y-compare" }
                            ]
                        },
                        {
                            header: "矿工专区（托管与算力分析）",
                            items: [
                                { title: "挖矿收益计算器", path: "/tools/mining-income-calculator" },
                                { title: "矿机盈利能力计算器", path: "/tools/miner-profitability" },
                                { title: "矿机选购速查", path: "/tools/miner-buying-guide" }
                            ]
                        },
                        {
                            header: "全球支持与合规",
                            items: [
                                { title: "加拿大 AECO 天然气价格预测", path: "/tools/aeco-price-forecast" },
                                { title: "全球物流运输推荐", path: "/tools/global-logistics" },
                                { title: "全球合规政策", path: "/tools/global-compliance" }
                            ]
                        }
                    ]
                },
                {
                    title: "资料中心",
                    path: "/resources",
                    type: "mega",
                    gridCols: "grid-cols-4",
                    sections: [
                        {
                            header: "文档",
                            items: [
                                { title: "白皮书", path: "/resources/whitepapers" },
                                { title: "行业报告", path: "/resources/reports" }
                            ]
                        },
                        {
                            header: "案例",
                            items: [
                                { title: "全部案例", path: "/resources/case-studies" },
                                { title: "按区域查看", path: "/resources/case-studies/regions" },
                                { title: "按场景查看", path: "/resources/case-studies/scenarios" }
                            ]
                        },
                        {
                            header: "技术库",
                            items: [
                                { title: "技术参数表", path: "/resources/datasheets" },
                                { title: "认证与合规文件", path: "/resources/certifications" }
                            ]
                        },
                        {
                            header: "媒体与支持",
                            items: [
                                { title: "视频与教程", path: "/resources/videos" },
                                { title: "常见问答 FAQ", path: "/resources/faq" }
                            ]
                        }
                    ]
                },
                {
                    title: "服务支持",
                    path: "/support",
                    type: "menu",
                    children: [
                        { title: "服务网络", path: "/support/network" },
                        { title: "技术支持", path: "/support/tech" },
                        { title: "售后与保养", path: "/support/service" }
                    ]
                },
                {
                    title: "关于我们",
                    path: "/about",
                    type: "menu",
                    children: [
                        { title: "公司介绍", path: "/about/company" },
                        { title: "联系我们", path: "/about/contact" }
                    ]
                }
            ],

            i18n: {
                zh: {
                    tagline: "天然气发电挖矿助手",
                    footerTagline: "让天然气发电挖矿更简单",
                    auth_login: "登录",
                    auth_logout: "退出登录",
                    reminder_title: "解锁完整体验",
                    reminder_desc: "登录即可使用高级测算工具、查看实时数据以及获取独家挖矿报告。",
                    reminder_later: "暂不登录",
                    privacy_policy: "隐私权政策",
                    
                    /* --- DASHBOARD TRANSLATIONS (Merged) --- */
                    "Powering": "赋能",
                    "with Natural Gas": "天然气发电",
                    "heroSubtext": "利用搁浅天然气和伴生气进行高效、合规的比特币挖矿。",
                    "btcPriceTitle": "比特币价格 (USD)",
                    "sourceCoingecko": "数据来源：CoinGecko",
                    "btcDifficultyTitle": "全网难度",
                    "liveNetworkStatus": "实时网络状态",
                    "btcHashrateTitle": "全网算力",
                    "globalPower": "全球算力规模",
                    "btcAdjustmentTitle": "下次难度调整",
                    "cbeciTitle": "比特币电力消耗",
                    "cbeciSubtitle": "数据基于剑桥比特币电力消耗指数 (CBECI)",
                    "estimatedConsTitle": "预计年化电力消耗",
                    "comparableTo": "相当于该国年耗电量：",
                    "countryComparison": "国家能耗对比",
                    "countryPoland": "波兰",
                    "countryUkraine": "乌克兰",
                    "btcNetwork": "比特币网络",
                    "histTrendTitle": "历史电力需求趋势",
                    "monthlyAvg": "月度平均",
                    "hashrateTrendTitle": "比特币全网算力历史趋势",
                    "hashrateSource": "数据来源",
                    // Chart Labels
                    "chartPowerDemand": "全球比特币电力需求 (TWh)",
                    "chartHashrate": "网络算力 (EH/s)",
                    // Digiconomist
                    "digiTitle": "比特币环境影响",
                    "digiSubtitle": "数据基于 Digiconomist",
                    "annualizedFootprint": "年化总足迹",
                    "singleTxFootprint": "单笔交易足迹",
                    "carbonFootprint": "碳足迹",
                    "electricalEnergy": "电能消耗",
                    "eWaste": "电子垃圾",
                    "compHousehold": "相当于美国家庭平均用电量：",
                    "days": "天"
                },
                en: {
                    tagline: "Natural Gas Power Mining Assistant",
                    footerTagline: "Making natural gas power mining easier",
                    auth_login: "Login",
                    auth_logout: "Logout",
                    reminder_title: "Unlock Full Power",
                    reminder_desc: "Login to access premium tools, real-time data, and exclusive mining reports.",
                    reminder_later: "Maybe Later",
                    privacy_policy: "Privacy Policy",
                    
                    /* --- DASHBOARD TRANSLATIONS (Merged) --- */
                    "Powering": "Powering2",
                    "with Natural Gas": "with Natural Gas",
                    "heroSubtext": "Utilizing stranded gas and flared gas for efficient, profitable Bitcoin mining operations.",
                    "btcPriceTitle": "Bitcoin Price (USD)",
                    "sourceCoingecko": "Live data from CoinGecko",
                    "btcDifficultyTitle": "Network Difficulty",
                    "liveNetworkStatus": "Live Network Status",
                    "btcHashrateTitle": "Network Hashrate",
                    "globalPower": "Global Computational Power",
                    "btcAdjustmentTitle": "Next Adjustment",
                    "cbeciTitle": "Bitcoin Electricity Consumption",
                    "cbeciSubtitle": "Data insights based on Cambridge Bitcoin Electricity Consumption Index (CBECI)",
                    "estimatedConsTitle": "Estimated Annualized Consumption",
                    "comparableTo": "Comparable to the power consumption of",
                    "countryComparison": "Country Comparison",
                    "countryPoland": "Poland",
                    "countryUkraine": "Ukraine",
                    "btcNetwork": "Bitcoin Network",
                    "histTrendTitle": "Historical Power Demand Trend",
                    "monthlyAvg": "Monthly Average",
                    "hashrateTrendTitle": "Bitcoin Network Hashrate History",
                    "hashrateSource": "Source",
                    // Chart Labels
                    "chartPowerDemand": "Global Bitcoin Power Demand (TWh)",
                    "chartHashrate": "Network Hashrate (EH/s)",
                    // Digiconomist
                    "digiTitle": "Bitcoin Environmental Impact",
                    "digiSubtitle": "Data insights based on Digiconomist",
                    "annualizedFootprint": "Annualized Total Footprints",
                    "singleTxFootprint": "Single Transaction Footprints",
                    "carbonFootprint": "Carbon Footprint",
                    "electricalEnergy": "Electrical Energy",
                    "eWaste": "Electronic Waste",
                    "compHousehold": "Equivalent to power consumption of an average US household for",
                    "days": "days",

                    "首页": "Home",
                    "解决方案": "Solutions",
                    "机型库": "Products",
                    "排行榜": "Rankings",
                    "应用场景": "Use Cases",
                    "工具箱": "Tools",
                    "资料中心": "Resources",
                    "服务支持": "Support",
                    "关于我们": "About Us",
                    "联系我们": "Contact Us",
                    "油气井/伴生气发电": "Oil & Gas Power",
                    "工业园区与分布式能源": "Industrial Power",
                    "数据中心 / 挖矿电力": "Data Center / Mining",
                    "热电联供 CHP": "CHP Cogeneration",
                    "按功率分类": "By Power",
                    "按冷却方式": "By Cooling",
                    "按气源类型": "By Gas Type",
                    "按部署形式": "By Deployment",
                    "按品牌": "By Brand",
                    "小于 500 kW": "< 500 kW",
                    "500 – 1,000 kW": "500 – 1,000 kW",
                    "1 MW 以上": "1 MW+",
                    "风冷": "Air Cooled",
                    "液冷": "Liquid Cooled",
                    "天然气": "Natural Gas",
                    "伴生气": "Associated Gas",
                    "低甲烷值气": "Low Methane Gas",
                    "集装箱机组": "Containerized",
                    "一体化机组 AIS": "Integrated (AIS)",
                    "滑撬式机组": "Skid Mounted",
                    "全部品牌": "All Brands",
                    "中国生产": "Made in China",
                    "海外生产": "Overseas Brands",
                    "性能榜": "Performance",
                    "经济性榜": "Economics",
                    "可靠性榜": "Reliability",
                    "品质与环保榜": "Quality & Eco",
                    "系统能力榜": "System Cap.",
                    "区域榜": "Regions",
                    "综合性能 TOP 榜": "Top Performance",
                    "高效率榜": "High Efficiency",
                    "天然气内燃机发电效率排行榜": "Elec. Efficiency Rank",
                    "天然气内燃机热效率排行榜": "Thermal Efficiency Rank",
                    "天然气内燃机耗气量排行榜": "Gas Consumption Rank",
                    "最佳 ROI 榜": "Best ROI",
                    "最低发电成本 LCOE 榜": "Lowest LCOE",
                    "天然气内燃机折旧排行榜": "Depreciation Rank",
                    "天然气内燃机投资回报率排行榜": "ROI Rank",
                    "高可靠机组榜": "High Reliability",
                    "最长 MTBF 榜": "Longest MTBF",
                    "天然气内燃机保养时间排行榜": "Maintenance Interval Rank",
                    "天然气内燃机备件保障排行榜": "Spare Parts Rank",
                    "天然气内燃机排放排行榜": "Emission Rank",
                    "天然气内燃机噪音排行榜": "Noise Rank",
                    "天然气内燃机发电机排行榜": "Generator Rank",
                    "天然气内燃机控制系统排行榜": "Control System Rank",
                    "美国市场榜": "USA Market",
                    "加拿大市场榜": "Canada Market",
                    "中东市场榜": "Middle East Market",
                    "俄罗斯市场榜": "Russia Market",
                    "油气井 / 伴生气": "Oilfield / Associated Gas",
                    "工业与园区能源": "Industrial & Park",
                    "挖矿 / 数据中心": "Mining / Data Center",
                    "CHP 热电联供": "CHP",
                    "经济测算工具": "Economic Tools",
                    "工程与技术工具": "Engineering Tools",
                    "项目与选型工具": "Selection Tools",
                    "矿工专区（托管与算力分析）": "Miners Zone",
                    "全球支持与合规": "Global Support",
                    "LCOE 成本计算器": "LCOE Calculator",
                    "ROI 回报估算器": "ROI Estimator",
                    "燃气发电挖矿收益计算器": "Gas Mining Revenue",
                    "蒙特卡洛模拟盈利分析": "Monte Carlo Sim",
                    "天然气发电耗气成本分析": "Gas Cost Analysis",
                    "气质适配工具": "Gas Fit Tool",
                    "排放估算工具": "Emission Estimator",
                    "气体分析计算器": "Gas Analyzer",
                    "能电转换计算器": "Energy Conversion",
                    "天然气主要成分热值表": "Heat Value Table",
                    "站点匹配向导": "Site Fit Wizard",
                    "气源所在地分析": "Location Analysis",
                    "燃气发动机选型与运营经济性": "Engine Selection & Econ",
                    "天然气发电机机油消耗率": "Oil Consumption",
                    "车机 VS 工业机 10MW 对比分析": "Vehicle vs Ind. (10MW)",
                    "多机型对比 3 年运营数据": "3-Year Ops Data",
                    "挖矿收益计算器": "Mining Revenue Calc",
                    "矿机盈利能力计算器": "Miner Profitability",
                    "矿机选购速查": "Miner Buyer Guide",
                    "加拿大 AECO 天然气价格预测": "AECO Price Forecast",
                    "全球物流运输推荐": "Global Logistics",
                    "全球合规政策": "Global Compliance",
                    "文档": "Documents",
                    "案例": "Case Studies",
                    "技术库": "Tech Library",
                    "媒体与支持": "Media & Support",
                    "白皮书": "Whitepapers",
                    "行业报告": "Industry Reports",
                    "全部案例": "All Cases",
                    "按区域查看": "By Region",
                    "按场景查看": "By Scenario",
                    "技术参数表": "Datasheets",
                    "认证与合规文件": "Certifications",
                    "视频与教程": "Videos & Tutorials",
                    "常见问答 FAQ": "FAQ",
                    "服务网络": "Service Network",
                    "技术支持": "Tech Support",
                    "售后与保养": "After-sales",
                    "公司介绍": "Company Profile"
                },
                ru: {
                    tagline: "Помощник по газовому майнингу",
                    footerTagline: "Майнинг на газе проще",
                    auth_login: "Войти",
                    auth_logout: "Выйти",
                    reminder_title: "Полный доступ",
                    reminder_desc: "Войдите для доступа к инструментам, данным в реальном времени и отчетам.",
                    reminder_later: "Позже",
                    privacy_policy: "Политика конфиденциальности",
                    
                    /* --- DASHBOARD TRANSLATIONS (Merged) --- */
                    "Powering": "Майнинг",
                    "with Natural Gas": "на Природном Газе",
                    "heroSubtext": "Использование попутного газа для эффективного майнинга.",
                    "btcPriceTitle": "Цена Биткойна (USD)",
                    "sourceCoingecko": "Данные CoinGecko",
                    "btcDifficultyTitle": "Сложность сети",
                    "liveNetworkStatus": "Статус сети",
                    "btcHashrateTitle": "Хешрейт сети",
                    "globalPower": "Глобальная мощь",
                    "btcAdjustmentTitle": "След. пересчет",
                    "cbeciTitle": "Энергопотребление Биткойна",
                    "cbeciSubtitle": "На основе индекса CBECI",
                    "estimatedConsTitle": "Годовое потребление",
                    "comparableTo": "Сравнимо с потреблением страны:",
                    "countryComparison": "Сравнение стран",
                    "countryPoland": "Польша",
                    "countryUkraine": "Украина",
                    "btcNetwork": "Сеть Биткойн",
                    "histTrendTitle": "Тренд энергопотребления",
                    "monthlyAvg": "Среднее за месяц",
                    "hashrateTrendTitle": "История хешрейта сети Bitcoin",
                    "hashrateSource": "Источник",
                    // Chart Labels
                    "chartPowerDemand": "Энергопотребление (TWh)",
                    "chartHashrate": "Хешрейт сети (EH/s)",
                    // Digiconomist
                    "digiTitle": "Воздействие Биткойна на окружающую среду",
                    "digiSubtitle": "Данные на основе Digiconomist",
                    "annualizedFootprint": "Годовой след",
                    "singleTxFootprint": "След одной транзакции",
                    "carbonFootprint": "Углеродный след",
                    "electricalEnergy": "Электроэнергия",
                    "eWaste": "Электронные отходы",
                    "compHousehold": "Эквивалентно потреблению дома в США за",
                    "days": "дней",

                    "首页": "Главная",
                    "解决方案": "Решения",
                    "机型库": "Продукты",
                    "排行榜": "Рейтинги",
                    "应用场景": "Кейсы",
                    "工具箱": "Инструменты",
                    "资料中心": "Ресурсы",
                    "服务支持": "Поддержка",
                    "关于我们": "О нас",
                    "联系我们": "Контакты",
                    "油气井/伴生气发电": "Нефтегаз",
                    "工业园区与分布式能源": "Пром. энергия",
                    "数据中心 / 挖矿电力": "Майнинг",
                    "热电联供 CHP": "Когенерация",
                    "按功率分类": "По мощности",
                    "按冷却方式": "По охлаждению",
                    "按气源类型": "По типу газа",
                    "按部署形式": "По типу",
                    "按品牌": "По бренду",
                    "小于 500 kW": "< 500 кВт",
                    "500 – 1,000 kW": "500 – 1,000 кВт",
                    "1 MW 以上": "1 МВт+",
                    "风冷": "Воздушное",
                    "液冷": "Жидкостное",
                    "天然气": "Природный газ",
                    "伴生气": "Попутный газ",
                    "低甲烷值气": "Низкий метан",
                    "集装箱机组": "Контейнерные",
                    "一体化机组 AIS": "Интегрированные",
                    "滑撬式机组": "На раме",
                    "全部品牌": "Все бренды",
                    "中国生产": "Китай",
                    "海外生产": "Зарубежные",
                    "性能榜": "Производ.",
                    "经济性榜": "Экономика",
                    "可靠性榜": "Надежность",
                    "品质与环保榜": "Качество",
                    "系统能力榜": "Системы",
                    "区域榜": "Регионы",
                    "综合性能 TOP 榜": "Топ прозвод.",
                    "高效率榜": "Выс. эффективность",
                    "天然气内燃机发电效率排行榜": "Эл. КПД",
                    "天然气内燃机热效率排行榜": "Тепл. КПД",
                    "天然气内燃机耗气量排行榜": "Расход газа",
                    "最佳 ROI 榜": "Лучший ROI",
                    "最低发电成本 LCOE 榜": "Мин. LCOE",
                    "天然气内燃机折旧排行榜": "Амортизация",
                    "天然气内燃机投资回报率排行榜": "Рейтинг ROI",
                    "高可靠机组榜": "Надежность",
                    "最长 MTBF 榜": "Макс. MTBF",
                    "天然气内燃机保养时间排行榜": "Интервал ТО",
                    "天然气内燃机备件保障排行榜": "Запчасти",
                    "天然气内燃机排放排行榜": "Выбросы",
                    "天然气内燃机噪音排行榜": "Шум",
                    "天然气内燃机发电机排行榜": "Генераторы",
                    "天然气内燃机控制系统排行榜": "Системы упр.",
                    "美国市场榜": "Рынок США",
                    "加拿大市场榜": "Рынок Канады",
                    "中东市场榜": "Ближний Восток",
                    "俄罗斯市场榜": "Рынок РФ",
                    "油气井 / 伴生气": "Нефтегаз",
                    "工业与园区能源": "Пром. зоны",
                    "挖矿 / 数据中心": "Майнинг ЦОД",
                    "CHP 热电联供": "ТЭЦ",
                    "经济测算工具": "Экономика",
                    "工程与技术工具": "Инжиниринг",
                    "项目与选型工具": "Подбор",
                    "矿工专区（托管与算力分析）": "Майнерам",
                    "全球支持与合规": "Поддержка",
                    "LCOE 成本计算器": "LCOE Кальк.",
                    "ROI 回报估算器": "ROI Оценка",
                    "燃气发电挖矿收益计算器": "Доход майнинга",
                    "蒙特卡洛模拟盈利分析": "Монте-Карло",
                    "天然气发电耗气成本分析": "Затраты на газ",
                    "气质适配工具": "Анализ газа",
                    "排放估算工具": "Выбросы",
                    "气体分析计算器": "Газовый анализ",
                    "能电转换计算器": "Конвертер",
                    "天然气主要成分热值表": "Таблица тепла",
                    "站点匹配向导": "Подбор площадки",
                    "气源所在地分析": "Локация",
                    "燃气发动机选型与运营经济性": "Выбор двигателя",
                    "天然气发电机机油消耗率": "Расход масла",
                    "车机 VS 工业机 10MW 对比分析": "Авто vs Пром",
                    "多机型对比 3 年运营数据": "Данные за 3 года",
                    "挖矿收益计算器": "Доходность",
                    "矿机盈利能力计算器": "Рентабельность",
                    "矿机选购速查": "Выбор майнера",
                    "加拿大 AECO 天然气价格预测": "Прогноз AECO",
                    "全球物流运输推荐": "Логистика",
                    "全球合规政策": "Комплаенс",
                    "文档": "Документы",
                    "案例": "Кейсы",
                    "技术库": "Тех. база",
                    "媒体与支持": "Медиа",
                    "白皮书": "Whitepapers",
                    "行业报告": "Отчеты",
                    "全部案例": "Все кейсы",
                    "按区域查看": "По регионам",
                    "按场景查看": "По сценариям",
                    "技术参数表": "Спецификации",
                    "认证与合规文件": "Сертификаты",
                    "视频与教程": "Видео",
                    "常见问答 FAQ": "FAQ",
                    "服务网络": "Сервис",
                    "技术支持": "Техподдержка",
                    "售后与保养": "Обслуживание",
                    "公司介绍": "О компании"
                }
            }
        };

        // [CRITICAL FIX] Bind app to window immediately to resolve race conditions
        window.app = {
            currentLang: 'en', // Default to English
            isMobileMenuOpen: false,
            
            // Login Reminder Vars
            reminderInterval: null,
            reminderCount: 0,
            maxReminders: 3,

            // Dashboard Chart Instances
            cbeciChartInstance: null,
            hashrateChartInstance: null,

            init() {
                this.renderNav();
                this.renderFooter();
                this.updateStaticText();
                
                // Dashboard Inits
                this.fetchBitcoinData();
                this.initCbeciChart();
                this.updateHashrateChart('6M'); // Default to 6 Months
                
                // Back to Top Scroll Logic
                window.onscroll = () => {
                    const btn = document.getElementById('backToTopBtn');
                    if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                        btn.classList.remove('translate-y-20', 'opacity-0');
                    } else {
                        btn.classList.add('translate-y-20', 'opacity-0');
                    }
                };
            },

            // --- Login Reminder Logic ---
            startLoginReminders() {
                if (this.reminderInterval) return; // Already running
                setTimeout(() => this.showLoginReminder(), 2000);
                this.reminderInterval = setInterval(() => { this.showLoginReminder(); }, 15000);
            },
            stopLoginReminders() {
                if (this.reminderInterval) { clearInterval(this.reminderInterval); this.reminderInterval = null; }
                this.closeLoginReminder();
            },
            showLoginReminder() {
                if (this.reminderCount >= this.maxReminders) { this.stopLoginReminders(); return; }
                const modal = document.getElementById('loginReminderModal');
                const content = document.getElementById('loginReminderContent');
                if (modal && content) {
                    modal.classList.remove('hidden');
                    setTimeout(() => { content.classList.remove('scale-90', 'opacity-0'); content.classList.add('scale-100', 'opacity-100'); }, 50);
                    this.reminderCount++;
                }
            },
            closeLoginReminder() {
                const modal = document.getElementById('loginReminderModal');
                const content = document.getElementById('loginReminderContent');
                if (modal && content) {
                    content.classList.remove('scale-100', 'opacity-100');
                    content.classList.add('scale-90', 'opacity-0');
                    setTimeout(() => { modal.classList.add('hidden'); }, 500); 
                }
            },

            // --- Bitcoin & Dashboard Data Logic (Migrated) ---
            async fetchBitcoinData() {
                const priceEl = document.getElementById('btc-price');
                const changeEl = document.getElementById('btc-change');
                const diffEl = document.getElementById('btc-difficulty');
                const hashEl = document.getElementById('btc-hashrate');
                const adjEl = document.getElementById('btc-adjustment');
                const adjDateEl = document.getElementById('btc-adjustment-date');

                try {
                    // 1. Fetch Price from CoinGecko
                    const priceRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true');
                    const priceData = await priceRes.json();
                    
                    if (priceData.bitcoin) {
                        const usd = priceData.bitcoin.usd;
                        const change = priceData.bitcoin.usd_24h_change;
                        
                        if(priceEl) priceEl.innerText = `$${usd.toLocaleString()}`;
                        if(changeEl) {
                            changeEl.innerText = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
                            changeEl.classList.add(change >= 0 ? 'text-gas-green' : 'text-red-500');
                        }
                    }
                } catch (e) {
                    console.error("Price fetch failed", e);
                    if(priceEl) priceEl.innerText = "$95,420"; // Fallback demo data
                }

                try {
                    setTimeout(() => {
                        const difficulty = 101.65; // Trillions
                        const hashrate = 765; // EH/s
                        if(diffEl) diffEl.innerText = `${difficulty.toFixed(2)} T`;
                        if(hashEl) hashEl.innerText = hashrate;
                        if(adjEl) { adjEl.innerText = "+1.25%"; adjEl.classList.add('text-gas-green'); }
                        if(adjDateEl) adjDateEl.innerText = "Est. in 5 days";
                    }, 800);
                } catch (e) {}
            },

            initCbeciChart() {
                const canvas = document.getElementById('cbeciChart');
                if(!canvas) return;
                const ctx = canvas.getContext('2d');
                
                // Gradient for chart
                const gradient = ctx.createLinearGradient(0, 0, 0, 400);
                gradient.addColorStop(0, 'rgba(93, 214, 44, 0.5)');
                gradient.addColorStop(1, 'rgba(93, 214, 44, 0.0)');

                const dataPoints = [120, 132, 128, 145, 150, 158, 149, 162, 168, 175, 170, 172];
                const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

                this.cbeciChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: this.t('chartPowerDemand'), 
                            data: dataPoints,
                            borderColor: '#5DD62C',
                            backgroundColor: gradient,
                            borderWidth: 2,
                            pointBackgroundColor: '#000',
                            pointBorderColor: '#5DD62C',
                            pointHoverBackgroundColor: '#5DD62C',
                            pointHoverBorderColor: '#fff',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { grid: { color: 'rgba(255, 255, 255, 0.05)' }, ticks: { color: '#666' } },
                            x: { grid: { display: false }, ticks: { color: '#666' } }
                        }
                    }
                });
            },
            
            updateHashrateChart(range) {
                // Update Button Styles
                document.querySelectorAll('.chart-control').forEach(btn => {
                    if (btn.dataset.range === range) {
                        btn.className = "chart-control px-3 py-1 rounded-md text-xs font-medium text-black bg-gas-green transition-all";
                    } else {
                        btn.className = "chart-control px-3 py-1 rounded-md text-xs font-medium text-gray-400 hover:text-white transition-all";
                    }
                });

                // Mock Data Logic
                let labels = [];
                let data = [];
                const currentHashrate = 765;
                
                if (range === '6M') {
                    labels = ['Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan'];
                    data = [590, 625, 610, 680, 720, 765];
                } else {
                    // Simple mock for other ranges
                    labels = ['1', '2', '3', '4', '5'];
                    data = [700, 720, 710, 750, 765];
                }

                if (this.hashrateChartInstance) { this.hashrateChartInstance.destroy(); }

                const canvas = document.getElementById('hashrateHistoryChart');
                if(!canvas) return;
                const ctx = canvas.getContext('2d');
                
                const gradient = ctx.createLinearGradient(0, 0, 0, 300);
                gradient.addColorStop(0, 'rgba(255, 255, 255, 0.2)'); 
                gradient.addColorStop(1, 'rgba(255, 255, 255, 0.0)');

                this.hashrateChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: this.t('chartHashrate'), 
                            data: data,
                            borderColor: '#ffffff',
                            backgroundColor: gradient,
                            borderWidth: 2,
                            pointBackgroundColor: '#111',
                            pointBorderColor: '#ffffff',
                            pointHoverBackgroundColor: '#5DD62C',
                            pointHoverBorderColor: '#fff',
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { 
                                min: Math.min(...data) - 50,
                                grid: { color: 'rgba(255, 255, 255, 0.05)', drawBorder: false },
                                ticks: { color: '#666', callback: function(value) { return value + ' EH/s'; } }
                            },
                            x: { grid: { display: false }, ticks: { color: '#666' } }
                        }
                    }
                });
            },
            
            // --- Standard App Functions (Base) ---
            setLanguage(lang) {
                this.currentLang = lang;
                
                ['zh', 'en', 'ru'].forEach(l => {
                    const btn = document.getElementById(`btn-lang-${l}`);
                    const mobBtn = document.getElementById(`mob-btn-lang-${l}`);
                    
                    const activeClass = "text-black bg-gas-green shadow-glow font-bold";
                    const inactiveClass = "text-gas-subtext hover:text-white hover:bg-white/5 font-medium";
                    const mobActiveClass = "text-black bg-gas-green font-bold";
                    const mobInactiveClass = "text-gray-400 font-medium";

                    if (btn) btn.className = `px-2 py-1 rounded-full text-[10px] transition-all w-8 text-center ${l === lang ? activeClass : inactiveClass}`;
                    if (mobBtn) mobBtn.className = `px-4 py-2 rounded-full text-xs transition-all ${l === lang ? mobActiveClass : mobInactiveClass}`;
                });

                this.renderNav();
                this.renderMobileNav();
                this.renderFooter();
                this.updateStaticText();
                this.updateCharts(); // Update Charts on Lang Switch
            },

            updateCharts() {
                if (this.cbeciChartInstance) {
                    this.cbeciChartInstance.data.datasets[0].label = this.t('chartPowerDemand');
                    this.cbeciChartInstance.update();
                }
                if (this.hashrateChartInstance) {
                    this.hashrateChartInstance.data.datasets[0].label = this.t('chartHashrate');
                    this.hashrateChartInstance.update();
                }
            },

            t(key) {
                const dict = AppData.i18n[this.currentLang];
                return (dict && dict[key]) ? dict[key] : key;
            },

            toggleMobileMenu() {
                this.isMobileMenuOpen = !this.isMobileMenuOpen;
                const menu = document.getElementById('mobile-menu-container');
                const btnIcon = document.querySelector('#mobile-menu-btn i');
                
                if (this.isMobileMenuOpen) {
                    menu.classList.remove('translate-x-full');
                    btnIcon.classList.remove('fa-bars');
                    btnIcon.classList.add('fa-xmark');
                    document.body.style.overflow = 'hidden';
                    this.renderMobileNav();
                } else {
                    menu.classList.add('translate-x-full');
                    btnIcon.classList.remove('fa-xmark');
                    btnIcon.classList.add('fa-bars');
                    document.body.style.overflow = '';
                }
            },

            toggleMobileSubmenu(id) {
                const el = document.getElementById(id);
                const icon = document.getElementById(`icon-${id}`);
                
                if (el.style.maxHeight) {
                    el.style.maxHeight = null;
                    icon.classList.remove('rotate-180');
                } else {
                    el.style.maxHeight = el.scrollHeight + "px";
                    icon.classList.add('rotate-180');
                }
            },

            toggleFooter(id) {
                const el = document.getElementById(id);
                const icon = document.getElementById(`footer-icon-${id}`);
                
                if (el.style.maxHeight) {
                    el.style.maxHeight = null;
                    icon.classList.remove('rotate-180');
                    icon.classList.remove('text-gas-green');
                } else {
                    el.style.maxHeight = el.scrollHeight + "px";
                    icon.classList.add('rotate-180');
                    icon.classList.add('text-gas-green');
                }
            },

            renderNav() {
                const navContainer = document.getElementById('desktop-nav');
                navContainer.innerHTML = '';
                const totalItems = AppData.navigation.length;

                AppData.navigation.forEach((item, index) => {
                    if (item.type === 'link') {
                        navContainer.innerHTML += `
                            <a href="${item.path}" target="_blank" class="nav-item-link font-medium text-sm">
                                <span>${this.t(item.title)}</span>
                            </a>
                        `;
                    }
                    else if (item.type === 'menu' || item.type === 'mega') {
                        let dropContent = '';
                        let isMega = item.type === 'mega';
                        
                        const isRightAligned = index >= totalItems - 3;
                        const posClass = isRightAligned ? 'right-0' : 'left-0';
                        
                        if (isMega) {
                            const gridClass = item.gridCols || 'grid-cols-5';
                            const sectionsHtml = item.sections.map((section, idx) => {
                                const isLast = idx === item.sections.length - 1;
                                const borderClass = isLast ? '' : 'border-r border-white/5';
                                const itemsHtml = section.items.map(subItem => `
                                    <li class="mb-2">
                                        <a href="${subItem.path}" target="_blank" class="text-gray-400 hover:text-gas-green text-xs flex items-center gap-2 transition-colors">
                                            <i class="fa-solid fa-angle-right text-[10px] opacity-50"></i>
                                            ${this.t(subItem.title)}
                                        </a>
                                    </li>
                                `).join('');
                                return `<div class="col-span-1 space-y-4 ${borderClass} px-2">
                                            <h3 class="text-gas-green font-bold text-sm uppercase tracking-wider mb-3 border-b border-white/5 pb-2">${this.t(section.header)}</h3>
                                            <ul>${itemsHtml}</ul>
                                        </div>`;
                            }).join('');
                            dropContent = `<div class="mega-menu"><div class="max-w-[1800px] mx-auto px-4 grid ${gridClass} gap-6">${sectionsHtml}</div></div>`;
                        } else {
                            const childrenHtml = item.children.map(child => `
                                <a href="${child.path}" target="_blank" class="block px-4 py-2 text-sm text-gray-400 hover:text-gas-green hover:bg-white/5 whitespace-nowrap">${this.t(child.title)}</a>
                            `).join('');
                            dropContent = `<div class="dropdown-menu ${posClass}">${childrenHtml}</div>`;
                        }

                        const parentPos = isMega ? '' : 'relative';

                        navContainer.innerHTML += `
                            <div class="group h-full flex items-center cursor-pointer ${parentPos}">
                                <span class="nav-item-link font-medium text-sm">
                                    <span>${this.t(item.title)}</span> <i class="fa-solid fa-chevron-down text-[10px] ml-1"></i>
                                </span>
                                ${dropContent}
                            </div>
                        `;
                    }
                });
            },

            renderMobileNav() {
                const container = document.getElementById('mobile-nav-content');
                container.innerHTML = '';
                
                AppData.navigation.forEach((item, index) => {
                    if (item.type === 'link') {
                        container.innerHTML += `
                            <a href="${item.path}" target="_blank" class="block py-4 border-b border-white/10 text-lg font-medium hover:text-gas-green">
                                ${this.t(item.title)}
                            </a>
                        `;
                    } else {
                        const subId = `mob-sub-${index}`;
                        let subItemsHtml = '';
                        
                        if (item.type === 'menu') {
                            subItemsHtml = item.children.map(child => `
                                <a href="${child.path}" target="_blank" class="block py-3 pl-4 text-gray-400 border-l border-white/10 ml-2 hover:text-gas-green hover:border-gas-green text-sm">
                                    ${this.t(child.title)}
                                </a>
                            `).join('');
                        } else if (item.type === 'mega') {
                            subItemsHtml = item.sections.map(sec => `
                                <div class="py-2">
                                    <h4 class="text-gas-green text-xs font-bold uppercase mb-2 pl-4">${this.t(sec.header)}</h4>
                                    ${sec.items.map(sub => `
                                        <a href="${sub.path}" target="_blank" class="block py-2 pl-6 text-gray-400 border-l border-white/10 ml-2 hover:text-gas-green hover:border-gas-green text-sm">
                                            ${this.t(sub.title)}
                                        </a>
                                    `).join('')}
                                </div>
                            `).join('');
                        }

                        container.innerHTML += `
                            <div class="border-b border-white/10">
                                <button onclick="window.app.toggleMobileSubmenu('${subId}')" class="w-full py-4 flex justify-between items-center text-lg font-medium hover:text-gas-green focus:outline-none">
                                    <span>${this.t(item.title)}</span>
                                    <i id="icon-${subId}" class="fa-solid fa-chevron-down text-sm transition-transform duration-300"></i>
                                </button>
                                <div id="${subId}" class="mobile-submenu">
                                    <div class="pb-4 space-y-1">
                                        ${subItemsHtml}
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                });
            },

            renderFooter() {
                const footerContainer = document.getElementById('footer-links');
                footerContainer.innerHTML = '';

                AppData.navigation.forEach((item, idx) => {
                    if (item.title === '首页') return;

                    let contentHtml = '';
                    let desktopContentHtml = '';
                    const footerSubId = `footer-sub-${idx}`;
                    
                    if (item.type === 'menu') {
                        const links = item.children.map(child => `
                            <a href="${child.path}" target="_blank" class="footer-link hover:text-gas-green text-gray-400 mr-4 mb-2 inline-block">
                                ${this.t(child.title)}
                            </a>
                        `).join('');
                        contentHtml = `<div class="flex flex-wrap">${links}</div>`;
                    } 
                    else if (item.type === 'mega') {
                        const desktopSections = item.sections.map(section => {
                            const secLinks = section.items.map(sub => `
                                <a href="${sub.path}" target="_blank" class="hover:text-gas-green text-gray-400 ml-2 text-xs">
                                    ${this.t(sub.title)}
                                </a>
                            `).join('<span class="text-gray-700 mx-1">|</span>');
                            
                            return `
                                <div class="flex items-baseline mr-6 mb-2">
                                    <span class="text-gas-green text-xs font-bold uppercase mr-1 whitespace-nowrap">${this.t(section.header)}:</span>
                                    <div class="flex flex-wrap">${secLinks}</div>
                                </div>
                            `;
                        }).join('');
                        
                        const mobileLinks = item.sections.map(sec => 
                            sec.items.map(sub => 
                                `<a href="${sub.path}" target="_blank" class="footer-link block pl-2 border-l border-white/10 hover:border-gas-green mb-1">${this.t(sub.title)}</a>`
                            ).join('')
                        ).join('');

                        contentHtml = `<div class="flex flex-col">${mobileLinks}</div>`;
                        desktopContentHtml = `<div class="flex flex-wrap items-center">${desktopSections}</div>`;
                    }

                    const finalDesktopHtml = desktopContentHtml || contentHtml;

                    footerContainer.innerHTML += `
                        <div class="w-full border-b border-white/5 last:border-0">
                            <div class="hidden md:flex py-4 items-start">
                                <div class="w-32 lg:w-48 shrink-0">
                                    <h4 class="text-white font-bold text-sm border-l-2 border-gas-green pl-3">
                                        ${this.t(item.title)}
                                    </h4>
                                </div>
                                <div class="flex-1">
                                    ${finalDesktopHtml}
                                </div>
                            </div>

                            <div class="md:hidden">
                                <button onclick="window.app.toggleFooter('${footerSubId}')" class="w-full flex justify-between items-center py-3 text-sm font-bold text-white focus:outline-none">
                                    <span class="border-l-2 border-gas-green pl-3">${this.t(item.title)}</span>
                                    <i id="footer-icon-${footerSubId}" class="fa-solid fa-plus text-xs text-gray-500 transition-transform duration-300"></i>
                                </button>
                                <div id="${footerSubId}" class="footer-accordion-content">
                                    <div class="pt-2 pl-4 pb-4 text-gray-400">
                                        ${contentHtml} 
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            },

            captureAndShare() {
                window.scrollTo(0, 0);
                const watermark = document.createElement('div');
                watermark.id = 'temp-watermark';
                Object.assign(watermark.style, {
                    position: 'absolute', top: 0, left: 0, width: '100%', height: document.body.scrollHeight + 'px',
                    zIndex: 9999, pointerEvents: 'none', display: 'flex', flexWrap: 'wrap', 
                    alignContent: 'space-around', justifyContent: 'space-around', overflow: 'hidden', opacity: '0.15'
                });

                const textHtml = `<div style="text-align:center; transform: rotate(-30deg); margin: 100px;">
                                    <div style="font-size: 24px; font-weight: bold; color: #5DD62C;">www.gasgx.com</div>
                                    <div style="font-size: 16px; color: #fff;">Natural Gas Power Mining Assistant</div>
                                  </div>`;
                
                const count = Math.ceil(document.body.scrollHeight / 400) * 3;
                watermark.innerHTML = textHtml.repeat(count);
                document.body.appendChild(watermark);

                setTimeout(() => {
                    html2canvas(document.body, {
                        backgroundColor: '#0F0F0F',
                        scrollY: 0,
                        useCORS: true,
                        scale: 2
                    }).then(canvas => {
                        const link = document.createElement('a');
                        link.download = 'GasGx-Page-Capture.png';
                        link.href = canvas.toDataURL('image/png');
                        link.click();
                        document.body.removeChild(watermark);
                        
                        const modal = document.getElementById('shareModal');
                        modal.classList.remove('hidden');
                        setTimeout(() => modal.querySelector('div').classList.remove('scale-95', 'opacity-0'), 10);
                    }).catch(err => {
                        console.error(err);
                        if(document.getElementById('temp-watermark')) document.body.removeChild(watermark);
                        alert('Capture failed.');
                    });
                }, 500);
            },

            closeModal() {
                const modal = document.getElementById('shareModal');
                const content = modal.querySelector('div');
                content.classList.add('scale-95', 'opacity-0');
                setTimeout(() => modal.classList.add('hidden'), 300);
            },

            updateStaticText() {
                const taglineEl = document.getElementById('header-tagline');
                const footerTaglineEl = document.querySelector('[data-i18n="footerTagline"]');
                
                if(taglineEl) taglineEl.innerText = this.t('tagline');
                if(footerTaglineEl) footerTaglineEl.innerText = this.t('footerTagline');
                
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (key !== 'tagline' && key !== 'footerTagline') { 
                        el.innerText = this.t(key);
                    }
                });
            }
        };

        // Start
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => window.app.init());
        } else {
            window.app.init();
        }
    </script>
</body>
</html>